import{eu as c,lo as y,lp as d,lq as m,lr as p,ls as _,ax as g,Y as h,lt as b,s as A,aq as w,jH as l,lu as B}from"./index-CHZqFS1h.js";import{f as R,A as q}from"./Indices-cqS5r02Q.js";function I(e,t){f(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function f(e,t,o=2,r=o){const a=t.length/2;let n=0,i=0;if(!c(t)||y(t)){for(let s=0;s<a;++s)e[n]=t[i],e[n+1]=t[i+1],n+=o,i+=r;return}const u=d(t);if(m(t))for(let s=0;s<a;++s)e[n]=Math.max(t[i]/u,-1),e[n+1]=Math.max(t[i+1]/u,-1),n+=o,i+=r;else for(let s=0;s<a;++s)e[n]=t[i]/u,e[n+1]=t[i+1]/u,n+=o,i+=r}function S(e,t,o,r){const a=e.typedBuffer,n=e.typedBufferStride,i=(r==null?void 0:r.count)??e.count;let u=((r==null?void 0:r.dstIndex)??0)*n;for(let s=0;s<i;++s)a[u]=t,a[u+1]=o,u+=n}Object.freeze(Object.defineProperty({__proto__:null,fill:S,normalizeIntegerBuffer:f,normalizeIntegerBufferView:I},Symbol.toStringTag,{value:"Module"}));class v{constructor(t){this._streamDataRequester=t}async loadJSON(t,o){return this._load("json",t,o)}async loadBinary(t,o){return _(t)?(g(o),p(t)):this._load("binary",t,o)}async loadImage(t,o){return this._load("image",t,o)}async _load(t,o,r){if(this._streamDataRequester==null)return(await h(o,{responseType:j[t]})).data;const a=await b(this._streamDataRequester.request(o,t,r));if(a.ok===!0)return a.value;throw w(a.error),new A("glt-loader-request-error",`Request for resource failed: ${a.error}`)}}const j={image:"image",binary:"array-buffer",json:"json","image+type":void 0};function z(e,t){switch(t){case l.TRIANGLES:return T(e);case l.TRIANGLE_STRIP:return x(e);case l.TRIANGLE_FAN:return N(e)}}function T(e){return typeof e=="number"?q(e):B(e)?new Uint16Array(e):e}function x(e){const t=typeof e=="number"?e:e.length;if(t<3)return[];const o=t-2,r=R(3*o);if(typeof e=="number"){let a=0;for(let n=0;n<o;n+=1)n%2==0?(r[a++]=n,r[a++]=n+1,r[a++]=n+2):(r[a++]=n+1,r[a++]=n,r[a++]=n+2)}else{let a=0;for(let n=0;n<o;n+=1)n%2==0?(r[a++]=e[n],r[a++]=e[n+1],r[a++]=e[n+2]):(r[a++]=e[n+1],r[a++]=e[n],r[a++]=e[n+2])}return r}function N(e){const t=typeof e=="number"?e:e.length;if(t<3)return new Uint16Array(0);const o=t-2,r=o<=65536?new Uint16Array(3*o):new Uint32Array(3*o);if(typeof e=="number"){let u=0;for(let s=0;s<o;++s)r[u++]=0,r[u++]=s+1,r[u++]=s+2;return r}const a=e[0];let n=e[1],i=0;for(let u=0;u<o;++u){const s=e[u+2];r[i++]=a,r[i++]=n,r[i++]=s,n=s}return r}export{f as a,I as b,S as l,v as n,z as o};
